# 基于Reactor模式的高并发服务器

## 项目介绍
本项目使用C++语言开发了一个高并发服务器，基于Reactor模式构建，利用 `epoll` 进行事件管理，以实现高效的网络 I/O 操作。该服务器适合处理大量的并发连接请求，能够稳定运行并响应多个客户端的请求。项目设计简洁，便于扩展和维护，适用于构建高性能的网络服务器。

## 项目原理

### epoll的原理
`epoll` 是Linux下的高性能I/O多路复用模型，通过 `epoll`，可以监控大量的文件描述符事件（如读、写、异常等），一旦有事件发生，epoll 会通知应用程序处理相应的 I/O 操作。epoll 主要包含三个系统调用：
1. `epoll_create()`：创建一个 epoll 实例。
2. `epoll_ctl()`：向 epoll 实例中添加、删除或修改文件描述符。
3. `epoll_wait()`：等待事件发生，返回已触发的文件描述符集合。

### Reactor架构
Reactor 模式是一种事件驱动的处理架构，将事件监听和事件处理解耦，适合处理高并发需求。Reactor模式中的关键组件包括：
- **事件分发器**：负责监听事件（如 I/O 事件）并触发相应的处理。
- **事件处理器**：根据事件类型和状态，执行特定的处理逻辑。
- **资源管理器**：管理所需的资源（如网络连接和线程）以实现高效调度。

在本项目中，Reactor 模式利用 epoll 实现事件的监听和分发，通过独立的事件处理器处理不同类型的网络请求，确保了并发情况下服务器的稳定和响应速度。
### 多线程的主从Reactor模型
- 单线程的Reactor模型不能发挥多核CPU的性能
- 运行多个事件循环，主事件循环运行在主线程中，从事件循环运行在线程池中
- 主线程负责创建客户端链接，然后将connection分配给线程池处理

## 项目结构
```
project-root
├── bin             # 可执行文件目录
├── build           # 编译生成的文件
├── etc             # 日志输出配置文件
├── include         # 项目所需头文件
├── log             # 运行过程中产生的日志文件
├── scripts         # 编译脚本和运行脚本
│   └── build.sh    # 编译脚本
└── src             # 源代码文件
    ├── main.cpp    # 主程序文件
    └── impl        # 头文件对应的实现文件
```

## 如何运行项目
1. 首先运行编译脚本：
   ```bash
   ./scripts/build.sh
   ```
2. 编译完成后，执行 bin 目录中的可执行文件启动服务器：
   ```bash
   ./bin/epollserver
   ```